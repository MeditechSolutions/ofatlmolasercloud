<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="view_planner_spot_tree">
			<field name="name">planner.spot.tree</field>
			<field name="model">planner.spot</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
                <tree string="Spot">
                    <field name="name" invisible="1"/>
                    <field name="professional_id"/>
                    <field name="date"/>
                    <field name="start"/>
                    <field name="end"/>
                    <field name="spots"/>
                    <field name="available_spots"/>
                </tree>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_spot_form">
			<field name="name">planner.spot.form</field>
			<field name="model">planner.spot</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
                <form string="Spot">
                    <group>
                        <group>
                            <field name="professional_id" options="{'no_create':true,'no_open':true}"/>
                            <field name="date"/>
                            <field name="start"/>
                            <field name="stop"/>
                            <field name="spots"/>
                            <field name="available_spots" invisible="1"/>
                        </group>
                        <group>
                            <field name="name" invisible="1"/>
                            <field name="planner_ids" invisible="1"/>
                        </group>
                    </group>
                </form>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_professional_availability_tree">
			<field name="name">planner.professional.availability.tree</field>
			<field name="model">planner.professional.availability</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
                <tree string="Availability">
                    <field name="name" invisible="1"/>
                    <field name="professional_id"/>
                    <field name="day"/>
                    <field name="start"/>
                    <field name="end"/>
                    <field name="spots"/>
                </tree>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_professional_availability_form">
			<field name="name">planner.professional.availability.form</field>
			<field name="model">planner.professional.availability</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
                <form string="Availability">
                    <group>
                        <group>
                            <field name="professional_id" options="{'no_create':true,'no_open':true}"/>
                            <field name="day"/>
                            <field name="start" widget="float_time"/>
                            <field name="end" widget="float_time"/>
                            <field name="duration"/>
                            <field name="spots"/>
                        </group>
                        <group>
                            <field name="name" invisible="1"/>
                        </group>
                    </group>
                </form>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_professional_tree">
			<field name="name">planner.professional.tree</field>
			<field name="model">planner.professional</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
                <tree string="Professional">
                    <field name="employee_id"/>
                    <field name="procedure_ids" widget="many2many_tags"/>
                </tree>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_professional_form">
			<field name="name">planner.professional.form</field>
			<field name="model">planner.professional</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
                <form string="Professional">
                    <group>
                        <group>
                            <field name="employee_id" options="{'no_create':true, 'no_open':true}"/>
                        </group>
                    </group>
                    <field name="procedure_ids">
                        <tree create="0" edit="0" delete="0" editable="top">
                            <field name="default_code" optional="show" readonly="1"/>
                            <field name="pos_categ_id" optional="show" readonly="1" options="{'no_create':true, 'no_open':true}"/>
                            <field name="name" readonly="1"/>
                            <field name="lst_price" readonly="1"/>
                            <field name="product_template_attribute_value_ids" optional="hide" readonly="1" options="{'no_create':true, 'no_open':true}" groups="product.group_product_variant" widget="many2many_tags"/>
                            <field name="company_id" optional="hide" readonly="1" options="{'no_create':true, 'no_open':true}" groups="base.group_multi_company"/>
                            <field name="categ_id" optional="hide" readonly="1" options="{'no_create':true, 'no_open':true}"/>
                        </tree>
                    </field>
                </form>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_planner_tree">
			<field name="name">planner.planner.tree</field>
			<field name="model">planner.planner</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
                <tree string="Planner">
                    <field name="name" invisible="1"/>
                    <field name="patient_id"/>
                    <field name="professional_id"/>
                    <field name="procedure_id"/>
                    <field name="date" invisible="1"/>
                    <field name="start"/>
                    <field name="end"/>
                    <field name="received" widget="boolean_toggle" attrs="{'readonly': [('state','in',['received','attended'])]}"/>
                    <field name="spot_id" invisible="1"/>
                    <field name="state"/>
                </tree>
			</field>
		</record>
        
        <record model="ir.ui.view" id="view_planner_planner_form">
			<field name="name">planner.planner.form</field>
			<field name="model">planner.planner</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
                <form string="Planner">
                    <group>
                        <group>
                            <field name="patient_id" widget="res_partner_many2one" string="Paciente"/>
                            <field name="professional_id" options="{'no_create':true}"/>
                            <field name="procedure_ids" widget="many2many_tags" invisible="1"/>
                            <field name="spot_id" options="{'no_create':true, 'no_open':true}"/>
                            <field name="date" string="Fecha" attrs="{}" invisible="1"/>
                            <field name="start" string="Inicio" attrs="{}" invisible="1"/>
                            <field name="end" string="Fin" attrs="{}" invisible="1"/>
                            <field name="procedure_id" options="{'no_create':true, 'no_open':true}" domain="[('id','in',procedure_ids)]"/>
                        </group>
                        <group>
                            <field name="name" invisible="1"/>
                            <field name="received" invisible="1"/>
                        </group>
                    </group>
                </form>
			</field>
		</record>
        
        <record id="action_planner_spot" model="ir.actions.act_window">
            <field name="name">Spot</field>
            <field name="res_model">planner.spot</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_planner_professional_availability" model="ir.actions.act_window">
            <field name="name">Availability</field>
            <field name="res_model">planner.professional.availability</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_planner_professional" model="ir.actions.act_window">
            <field name="name">Professional</field>
            <field name="res_model">planner.professional</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_planner_procedure" model="ir.actions.act_window">
            <field name="name">Procedure</field>
            <field name="res_model">product.template</field>
            <field name="domain">[('type','=','service')]</field>
            <field name="context">{'default_type':'service'}</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_planner_planner" model="ir.actions.act_window">
            <field name="name">Planner</field>
            <field name="res_model">planner.planner</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <menuitem name="Planner"
            id="menu_planner"
            web_icon="mstech_planner,static/description/icon.png"
            sequence="20"/>
        
        <menuitem name="Planner"
            id="menu_action_planner_planner"
            action="action_planner_planner"
            parent="menu_planner"
            sequence="10"/>
        
        <menuitem name="Procedure"
            id="menu_action_planner_procedure"
            action="action_planner_procedure"
            parent="menu_planner"
            sequence="15"/>
        
        <menuitem name="Professional"
            id="menu_action_planner_professional"
            action="action_planner_professional"
            parent="menu_planner"
            sequence="20"/>
        
        <menuitem name="Availability"
            id="menu_action_planner_professional_availability"
            action="action_planner_professional_availability"
            parent="menu_planner"
            sequence="25"/>
        
        <menuitem name="Spot"
            id="menu_action_planner_spot"
            action="action_planner_spot"
            parent="menu_planner"
            sequence="30"/>
    </data>
</odoo>
